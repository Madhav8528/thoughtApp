import { asyncHandler } from "../utils/asyncHandler.js";
import { ApiError } from "../utils/apiError.js";
import { ApiResponse } from "../utils/apiResponse.js";
import { GoogleGenerativeAI } from "@google/generative-ai";
import OpenAI from "openai";


const thoughtByPrompt = asyncHandler( async (req, res) => {
    
    const { prompt } =  req.body
    if(!prompt){
        throw new ApiError(401, "Please enter a prompt to genrate the thoughts")
    }
    

    const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY)
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" })
    
    const result = await model.generateContent("A single thought of a medium lenght not more than 50 words" + prompt)
    
    return res.status(200)
    .json( new ApiResponse(200, result.response.text(), "Thoughts generated by prompt successfully!") )
})

const randomThought = asyncHandler( async (req, res) => {
    
    const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY)
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" })
    
    const result = await model.generateContent("A single great random thought of 30 words")
    
    return res.status(200)
    .json( new ApiResponse(200, result.response.text(), "Thoughts generated by prompt successfully!") )
})

export { thoughtByPrompt,
         randomThought
 }